#!/bin/bash
function commit_root(){
toplevel_dir=$(mktemp -d -p /tmp)
moment=$(date +%Y-%m-%d--%T)
block_device_root="/dev/sda3/"
mount $block_device_root $toplevel_dir -o "subvolid="5 &&\
btrfs su snap -r / $toplevel_dir/@commit-root-in--$moment &&\
grub-mkconfig -o /boot/grub/grub.cfg
}
commit_root
